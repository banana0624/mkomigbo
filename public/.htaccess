# project-root/public/.htaccess

# 1) Default index file for directories

DirectoryIndex index.php index.html

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

# 2) Redirect any public /subjects URLs to the staff area

# /subjects -> /staff/subjects/

# /subjects/{slug}/ -> /staff/subjects/{slug}/

RewriteRule ^subjects/?$ staff/subjects/ [R=302,L]
RewriteRule ^subjects/([A-Za-z0-9_-]+)/?$ staff/subjects/$1/ [R=302,L]

# 3) Serve existing files/directories as-is

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 4) (Optional) Clean URLs: map "/path" to "/path.php" if the PHP file exists.

# Example: /staff/login -> /staff/login.php

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L]
</IfModule>
