## project-root/public/.htaccess ##

RewriteEngine On

# Prevent directory listing
Options -Indexes

# Security headers (optional)
<IfModule mod_headers.c>
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set X-Content-Type-Options "nosniff"
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
  Header always set X-XSS-Protection "1; mode=block"
</IfModule>

# Default index files in this folder
DirectoryIndex test_index.php index.php

# Block direct access to private folder
RewriteRule ^private/ - [F,L]

# If the request points to an existing file or directory, serve it directly
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Pretty URLs: subjects and pages routing
RewriteRule ^subjects/([^/]+)/?$ subjects/index.php?slug=$1 [L,QSA]
RewriteRule ^pages/([^/]+)/?$ pages/index.php?slug=$1 [L,QSA]

# Fallback: route all remaining requests to index.php
RewriteRule ^(.*)$ index.php [L,QSA]
